<!-- <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Upload Product | VitronicsHub</title>
<style>
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    margin: 0;
    padding: 20px;
    background-color: #f5f5f5;
}
.container {
    max-width: 600px;
    margin: 0 auto;
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
}
h1 { text-align: center; color: #333; }
.form-group { margin-bottom: 15px; }
label { display: block; margin-bottom: 5px; font-weight: bold; cursor: pointer; }
input, textarea, select {
    width: 100%;
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
    box-sizing: border-box;
}
button {
    background-color: #4CAF50;
    color: white;
    padding: 10px 15px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
    width: 100%;
}
button:hover { background-color: #45a049; }
#preview {
    max-width: 200px;
    max-height: 200px;
    margin-top: 10px;
    display: none;
    border: 1px solid #ddd;
    border-radius: 4px;
}
#status {
    margin-top: 15px;
    padding: 10px;
    border-radius: 4px;
    display: none;
}
.success { background-color: #dff0d8; color: #3c763d; }
.error { background-color: #f2dede; color: #a94442; }
</style>
</head>
<body>
<div class="container">
    <h1>Upload New Product</h1>
    <form id="productForm" enctype="multipart/form-data">
        <div class="form-group">
            <label for="name">Product Name</label>
            <input type="text" id="name" name="name" required>
        </div>

        <div class="form-group">
            <label for="description">Description</label>
            <textarea id="description" name="description" rows="3" required></textarea>
        </div>

        <div class="form-group">
            <label for="category">Category</label>
            <input type="text" id="category" name="category" required>
        </div>

        <div class="form-group">
            <label for="price">Price</label>
            <input type="number" id="price" name="price" step="0.01" required>
        </div>

        <div class="form-group">
            <label for="old_price">Old Price (Optional)</label>
            <input type="number" id="old_price" name="old_price" step="0.01">
        </div>

        <div class="form-group">
            <label for="stock_quantity">Stock Quantity</label>
            <input type="number" id="stock_quantity" name="stock_quantity" required>
        </div>

        <div class="form-group">
            <label for="image">Choose Product Image</label>
            <input type="file" id="image" name="image" accept="image/*" required>
            <img id="preview" alt="Image preview">
        </div>

        <button type="submit">Upload Product</button>
    </form>

    <div id="status"></div>
</div>

<script>
// Image preview
// document.getElementById('image').addEventListener('change', function(e) {
//     const preview = document.getElementById('preview');
//     const file = e.target.files[0];
//     if (file) {
//         preview.style.display = 'block';
//         preview.src = URL.createObjectURL(file);
//     } else {
//         preview.style.display = 'none';
//     }
// });

    document.getElementById('image').addEventListener('change', function(e) {
    const preview = document.getElementById('preview');
    const file = e.target.files[0];
    
    if (file) {
        const reader = new FileReader();
        reader.onload = function(event) {
            preview.src = event.target.result;
            preview.style.display = 'block';
        }
        reader.readAsDataURL(file); // Converts file to base64 URL
    } else {
        preview.style.display = 'none';
    }
});

// Form submission
document.getElementById('productForm').addEventListener('submit', async function(e) {
    e.preventDefault();

    const formData = new FormData(this);
    const statusDiv = document.getElementById('status');

    try {
        const response = await fetch('https://vitronicshub.up.railway.app/api/products', {
            method: 'POST',
            credentials: 'include',
            body: formData
        });

        const result = await response.json();

        if (response.ok) {
            statusDiv.textContent = 'Product uploaded successfully!';
            statusDiv.className = 'success';
            statusDiv.style.display = 'block';
            this.reset();
            document.getElementById('preview').style.display = 'none';
        } else {
            throw new Error(result.message || 'Failed to upload product.');
        }
    } catch (err) {
        statusDiv.textContent = `Error: ${err.message}`;
        statusDiv.className = 'error';
        statusDiv.style.display = 'block';
        console.error('Upload error:', err);
    }
});
</script>
</body>
</html>
 -->

 <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Upload Product | VitronicsHub</title>
<style>
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    margin: 0;
    padding: 20px;
    background-color: #f5f5f5;
    -webkit-tap-highlight-color: transparent;
}
.container {
    max-width: 600px;
    margin: 0 auto;
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
}
h1 { text-align: center; color: #333; }
.form-group { margin-bottom: 15px; }
label { display: block; margin-bottom: 5px; font-weight: bold; cursor: pointer; }
input, textarea, select {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
    box-sizing: border-box;
    font-size: 16px; /* Larger font for mobile */
}
button {
    background-color: #4CAF50;
    color: white;
    padding: 12px 15px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
    width: 100%;
    -webkit-appearance: none;
}
button:hover { background-color: #45a049; }
#preview {
    max-width: 100%;
    max-height: 200px;
    margin-top: 10px;
    display: none;
    border: 1px solid #ddd;
    border-radius: 4px;
}
#status {
    margin-top: 15px;
    padding: 10px;
    border-radius: 4px;
    display: none;
}
.success { background-color: #dff0d8; color: #3c763d; }
.error { background-color: #f2dede; color: #a94442; }

/* Mobile-specific styles */
.file-input-wrapper {
    position: relative;
    overflow: hidden;
    display: inline-block;
    width: 100%;
}

.file-input-wrapper input[type=file] {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
}

.file-input-button {
    display: block;
    padding: 10px;
    background: #f0f0f0;
    border: 1px dashed #ccc;
    border-radius: 4px;
    text-align: center;
    color: #555;
}

.file-input-button:hover {
    background: #e0e0e0;
}

.file-name {
    margin-top: 5px;
    font-size: 14px;
    color: #666;
    display: none;
}
</style>
</head>
<body>
<div class="container">
    <h1>Upload New Product</h1>
    <form id="productForm" enctype="multipart/form-data">
        <div class="form-group">
            <label for="name">Product Name</label>
            <input type="text" id="name" name="name" required>
        </div>

        <div class="form-group">
            <label for="description">Description</label>
            <textarea id="description" name="description" rows="3" required></textarea>
        </div>

        <div class="form-group">
            <label for="category">Category</label>
            <input type="text" id="category" name="category" required>
        </div>

        <div class="form-group">
            <label for="price">Price</label>
            <input type="number" id="price" name="price" step="0.01" required>
        </div>

        <div class="form-group">
            <label for="old_price">Old Price (Optional)</label>
            <input type="number" id="old_price" name="old_price" step="0.01">
        </div>

        <div class="form-group">
            <label for="stock_quantity">Stock Quantity</label>
            <input type="number" id="stock_quantity" name="stock_quantity" required>
        </div>

        <div class="form-group">
            <label>Choose Product Image</label>
            <div class="file-input-wrapper">
                <div class="file-input-button">Tap to select image</div>
                <input type="file" id="image" name="image" accept="image/*" required>
            </div>
            <div id="file-name" class="file-name"></div>
            <img id="preview" alt="Image preview">
        </div>

        <button type="submit">Upload Product</button>
    </form>

    <div id="status"></div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const fileInput = document.getElementById('image');
    const preview = document.getElementById('preview');
    const fileNameDisplay = document.getElementById('file-name');
    
    // Improved file input handling for mobile
    fileInput.addEventListener('change', function(e) {
        const file = e.target.files[0];
        
        if (file) {
            // Show file name
            fileNameDisplay.textContent = file.name;
            fileNameDisplay.style.display = 'block';
            
            // Create preview
            const reader = new FileReader();
            reader.onload = function(event) {
                preview.src = event.target.result;
                preview.style.display = 'block';
                
                // Ensure the image is properly displayed on mobile
                preview.onload = function() {
                    URL.revokeObjectURL(preview.src); // Free memory
                };
            };
            
            // Handle potential errors
            reader.onerror = function() {
                console.error('Error reading file');
                fileNameDisplay.textContent = 'Error loading image';
            };
            
            reader.readAsDataURL(file);
        } else {
            preview.style.display = 'none';
            fileNameDisplay.style.display = 'none';
        }
    });
    
    // Form submission
    document.getElementById('productForm').addEventListener('submit', async function(e) {
        e.preventDefault();

        const formData = new FormData(this);
        const statusDiv = document.getElementById('status');

        try {
            const response = await fetch('https://vitronicshub.up.railway.app/api/products', {
                method: 'POST',
                credentials: 'include',
                body: formData
            });

            const result = await response.json();

            if (response.ok) {
                statusDiv.textContent = 'Product uploaded successfully!';
                statusDiv.className = 'success';
                statusDiv.style.display = 'block';
                this.reset();
                document.getElementById('preview').style.display = 'none';
                fileNameDisplay.style.display = 'none';
            } else {
                throw new Error(result.message || 'Failed to upload product.');
            }
        } catch (err) {
            statusDiv.textContent = `Error: ${err.message}`;
            statusDiv.className = 'error';
            statusDiv.style.display = 'block';
            console.error('Upload error:', err);
        }
    });
    
    // Add touch feedback for mobile
    const fileInputButton = document.querySelector('.file-input-button');
    fileInputButton.addEventListener('touchstart', function() {
        this.style.backgroundColor = '#e0e0e0';
    });
    fileInputButton.addEventListener('touchend', function() {
        this.style.backgroundColor = '#f0f0f0';
    });
});
</script>
</body>
</html>
